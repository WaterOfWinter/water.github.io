<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>数据结构的旅程 | Water's study corner</title><meta name="author" content="water"><meta name="copyright" content="water"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="*数据结构的旅程参考课程：CS61B 参考文档：Qiushao的CS61B笔记以及 CS61B自身文档 本文档相当于CS61B文档的简略翻译版 Alist首先解释一下为什么要介绍Alist(也就是数组列表)，明明上节课的Dlist已经足够完美了，但我们在查找特定元素时，我们会发现Dlist无法直接一步到位，需要用到循环，但是如果是Alist的话，利用数组的特性就可以实现一步到位。啊哈，让我们从零开">
<meta property="og:type" content="article">
<meta property="og:title" content="数据结构的旅程">
<meta property="og:url" content="https://waterofwinter.github.io/water.github.io/2024/10/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%97%85%E7%A8%8B/index.html">
<meta property="og:site_name" content="Water&#39;s study corner">
<meta property="og:description" content="*数据结构的旅程参考课程：CS61B 参考文档：Qiushao的CS61B笔记以及 CS61B自身文档 本文档相当于CS61B文档的简略翻译版 Alist首先解释一下为什么要介绍Alist(也就是数组列表)，明明上节课的Dlist已经足够完美了，但我们在查找特定元素时，我们会发现Dlist无法直接一步到位，需要用到循环，但是如果是Alist的话，利用数组的特性就可以实现一步到位。啊哈，让我们从零开">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://waterofwinter.github.io/water.github.io/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241017164223.jpg">
<meta property="article:published_time" content="2024-10-09T10:14:31.000Z">
<meta property="article:modified_time" content="2024-10-21T11:39:34.783Z">
<meta property="article:author" content="water">
<meta property="article:tag" content="计算机Computer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://waterofwinter.github.io/water.github.io/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241017164223.jpg"><link rel="shortcut icon" href="/water.github.io/"><link rel="canonical" href="https://waterofwinter.github.io/water.github.io/2024/10/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%97%85%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/water.github.io/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/water.github.io/',
  algolia: undefined,
  localSearch: {"path":"/water.github.io/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据结构的旅程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-21 19:39:34'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar."><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/water.github.io/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241017164223.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/water.github.io/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/water.github.io/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/water.github.io/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/water.github.io/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/water.github.io/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/water.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/water.github.io/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/water.github.io/images/103008653_p0_master1200.jpg')"><nav id="nav"><span id="blog-info"><a href="/water.github.io/" title="Water's study corner"><span class="site-name">Water's study corner</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/water.github.io/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/water.github.io/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/water.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/water.github.io/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/water.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据结构的旅程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-10-09T10:14:31.000Z" title="发表于 2024-10-09 18:14:31">2024-10-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-21T11:39:34.783Z" title="更新于 2024-10-21 19:39:34">2024-10-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据结构的旅程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="数据结构的旅程"><a href="#数据结构的旅程" class="headerlink" title="*数据结构的旅程"></a>*数据结构的旅程</h1><p>参考课程：CS61B</p>
<p>参考文档：Qiushao的CS61B笔记以及 CS61B自身文档</p>
<p>本文档相当于CS61B文档的简略翻译版</p>
<h2 id="Alist"><a href="#Alist" class="headerlink" title="Alist"></a>Alist</h2><p>首先解释一下为什么要介绍Alist(也就是数组列表)，明明上节课的Dlist已经足够完美了，但我们在查找特定元素时，我们会发现Dlist无法直接一步到位，需要用到循环，但是如果是Alist的话，利用数组的特性就可以实现一步到位。啊哈，让我们从零开始建造Alist吧！！</p>
<p>实例化数组的三种方法：</p>
<ul>
<li><p><code>int[] x = new int[n];</code> (<code>x[0] = 1;</code>…)       </p>
</li>
<li><p><code>int[] y = new int&#123;1, 2, 3, 4, 5&#125;;</code></p>
</li>
<li><p><code>int[] z = &#123;9, 10, 11, 12, 13&#125;;</code></p>
<p>此外，数组复制Java也有自带的函数arraycopy().</p>
<p><code>int[] b = &#123;9, 10, 11&#125;; System.arraycopy(b, 0, x, 3, 2);</code></p>
<p>其中，各参数为：</p>
<ul>
<li>The array to use as a source</li>
<li>Where to start in the source array</li>
<li>The array to use as a destination</li>
<li>Where to start in the destination array</li>
<li>How many items to copy</li>
</ul>
</li>
</ul>
<p>完整代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AList</span> &#123;</span><br><span class="line">    <span class="comment">// size = 2</span></span><br><span class="line">    <span class="comment">// 5 6 0 8 0 0 0 0 0...</span></span><br><span class="line">    <span class="comment">// 0 1 2 3 4 5 6 7 8</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] items;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create empty List</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AList</span><span class="params">()</span> &#123;</span><br><span class="line">        items = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100</span>];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reSize</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] temp = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">        System.arraycopy(items, <span class="number">0</span>, temp, <span class="number">0</span>, size);</span><br><span class="line">        items = temp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addList</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == items.length) &#123;</span><br><span class="line">            reSize(size * <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        items[size] = x;</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items[size - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> getLast();</span><br><span class="line">        size -= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在resize方法中你会发现容量是成倍增长的。因为如果每当添加一个数，容量加一。可想而知，所消耗的时间是多么长，效率十分低。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-15%20203035.png" alt="屏幕截图 2024-10-15 203035"></p>
<p>虽然提高了效率，但当数组十分大的时候，再运用这个方法，就会有大量的空缺，造成大量的内存浪费。</p>
<p>上述代码仅适用于int类型，为了它更好地发挥它的作用，我们要用到我们的老朋友占位词。但是这里我们发现对数组直接使用占位词，你会发现有问题。这里我直接引用Qingsu关于这个问题的解决方案（如下图）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-15%20204117.png" alt="屏幕截图 2024-10-15 204117"></p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="Inheritance-IV-iterators"><a href="#Inheritance-IV-iterators" class="headerlink" title="Inheritance IV iterators"></a><strong>Inheritance IV iterators</strong></h2><h3 id="Iterators-and-Iterables"><a href="#Iterators-and-Iterables" class="headerlink" title="Iterators and Iterables"></a>Iterators and Iterables</h3><p>在讲迭代器与可迭代对象之前，补充一下集合的简略代码(可以完成添加不重复的物品，以及查看集合是否包含这个元素)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraySet</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T[] items;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size; <span class="comment">// the next item to be added will be at position size</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArraySet</span><span class="params">()</span> &#123;</span><br><span class="line">        items = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">100</span>]; <span class="comment">// we can abjust the size/resize, just like we did in the array list </span></span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* Adds an item to the set. (Ignores duplicates.) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (contains(x)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        items[size] = x;</span><br><span class="line">        size += i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contain</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i += <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (items[i].equal(x)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>迭代器与可迭代对象</strong>。这部分内容实际上就是 python 中迭代器的概念加上上文提到的用 Java 实现比较器的手段</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20191256.png" alt="屏幕截图 2024-10-09 191256"></p>
<p>我们可以从上面这张图发现新的遍历方法（java call this the enhanced for loop) ,我们将在揭开它的神秘面纱的过程中，了解迭代器与可迭代对象。</p>
<p>由于上面写了一个模拟集合的代码（不是java自带的），因此没有迭代器，所以如果使用enhanced loop,就会出现下面这种情况。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20193351.png" alt="屏幕截图 2024-10-09 193351"></p>
<p>迭代器相当于一个小巫师，它会检查ArraySet,一步步地遍历ArraySet逐一返回项</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20204929.png" alt="屏幕截图 2024-10-09 204929"></p>
<p>搞错了，再来！！</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20204457.png" alt="屏幕截图 2024-10-09 204457"></p>
<p>相关的接口代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line">    Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    T <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在此基础上我们实现了可迭代版本的 Arraysets，完整的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraySet</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T[] items;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size; <span class="comment">// the next item to be added will be at position size</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArraySet</span><span class="params">()</span> &#123;</span><br><span class="line">        items = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">100</span>];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns true if this map contains a mapping for the specified key.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i += <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (items[i].equals(x)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Associates the specified value with the specified key in this map.</span></span><br><span class="line"><span class="comment">       Throws an IllegalArgumentException if the key is null. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;can&#x27;t add null&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (contains(x)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        items[size] = x;</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns the number of key-value mappings in this map. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** returns an iterator (a.k.a. seer) into ME */</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArraySetIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ArraySetIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> wizPos;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ArraySetIterator</span><span class="params">()</span> &#123;</span><br><span class="line">            wizPos = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> wizPos &lt; size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">T</span> <span class="variable">returnItem</span> <span class="operator">=</span> items[wizPos];</span><br><span class="line">            wizPos += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> returnItem;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArraySet&lt;Integer&gt; aset = <span class="keyword">new</span> <span class="title class_">ArraySet</span>&lt;&gt;();</span><br><span class="line">        aset.add(<span class="number">5</span>);</span><br><span class="line">        aset.add(<span class="number">23</span>);</span><br><span class="line">        aset.add(<span class="number">42</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//iteration</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : aset) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Object-methods"><a href="#Object-methods" class="headerlink" title="Object methods"></a>Object methods</h3><p>如上文所述，Java 中所有的类都是 Object 类的子类，也可以说 Object 是最顶端的 superclass，继承的方法如下：</p>
<ul>
<li><code>String toString()</code></li>
<li><code>boolean equals(Object obj)</code></li>
<li><code>Class &lt;?&gt; getClass()</code></li>
<li><code>int hashCode()</code></li>
<li><code>protected Objectclone()</code></li>
<li><code>protected void finalize()</code></li>
<li><code>void notify()</code></li>
<li><code>void notifyAll()</code></li>
<li><code>void wait()</code></li>
<li><code>void wait(long timeout)</code></li>
<li><code>void wait(long timeout, int nanos)</code></li>
</ul>
<p>这里专注理解前两个即可</p>
<h4 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h4><p>相当于将某个对象字符串化的时候该怎么办？toString()解决的就是这个问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">x</span> <span class="operator">=</span> <span class="string">&quot;(&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (T i : <span class="built_in">this</span>) &#123;</span><br><span class="line">        x += i.toString() + <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    x += <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是，在Java中，如果你试图将两个字符串加在一起，你实际上正在创建一个全新的字符串，打个比方，纸质书籍如果有错误或者需要加一些新内容，肯定要重新编辑，在印刷出来，这样一定会需要时间，实际上这与字符串不可变有关。</p>
<p>所以让我们来改进一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">x</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(); <span class="comment">// 借用Java自带的类</span></span><br><span class="line">    x.append(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (T i : <span class="built_in">this</span>) &#123;</span><br><span class="line">        x.append(i.toString());</span><br><span class="line">        x.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    x.append(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> x.toString(); <span class="comment">// 原本类型是StringBuilder,需要转换成String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这边还有一个问题，为什么”for(T i : this)”中用this,而不用items.</p>
<p>因为用items可能会有空值，而this刚刚好。</p>
<h4 id="this"><a href="#this" class="headerlink" title="this"></a><strong>this</strong></h4><p>关于这个关键词，老面孔了，它有什么作用呢？</p>
<p>他会告诉你一个指向当前对象的引用。</p>
<p>与new关键词异曲同工，不过，他喊的不是新创建对象的地址，而是当前对象的地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20212635.png" alt="屏幕截图 2024-10-09 212635"></p>
<p>但有时我们会发现，size与this.size似乎是等价的；</p>
<p>这是为什么呢？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20212914.png" alt="屏幕截图 2024-10-09 212914"></p>
<p>当变量有同名变量时，不可以互转，因为Java不知道哪个是哪个。</p>
<p>this 还可以代替构造方法名，实现构造方法的调用,但它只能在构造方法中调用，且只能在第一句,不能与 <code>super()</code> 一起使用，除非是通过 <code>super()</code> 先调用父类构造方法，然后通过其他构造方法继续调用当前类的构造方法（隐含顺序决定：<code>super()</code> 总是先调用）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="string">&quot;Unknown&quot;</span>, <span class="number">0</span>); <span class="comment">// 调用另一个构造方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用无参构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带一个参数的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(name, <span class="number">0</span>); <span class="comment">// 调用带两个参数的构造方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用带一个参数的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带两个参数的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用带两个参数的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();       <span class="comment">// 调用无参构造方法</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>); <span class="comment">// 调用带一个参数的构造方法</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">25</span>); <span class="comment">// 直接调用带两个参数的构造方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>给出等价使用new方法的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 使用new创建对象并获取其字段值</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">tempPerson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Unknown&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = tempPerson.name;</span><br><span class="line">        <span class="built_in">this</span>.age = tempPerson.age;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用无参构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带一个参数的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用new创建对象并获取其字段值</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">tempPerson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(name, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = tempPerson.name;</span><br><span class="line">        <span class="built_in">this</span>.age = tempPerson.age;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用带一个参数的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带两个参数的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用带两个参数的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();       <span class="comment">// 调用无参构造方法</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>); <span class="comment">// 调用带一个参数的构造方法</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">25</span>); <span class="comment">// 直接调用带两个参数的构造方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="equals"><a href="#equals" class="headerlink" title="equals()"></a>equals()</h4><p>注意，Java 中 <code>==</code> 在比较对象的时候实际上比较的是<strong>二者是否是同一个对象</strong>，即二者存储的地址是否相同。而这显然不符合特定情况下我们的要求，所以我们采取 <code>equals</code> 来<strong>重载我们的 <code>=</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object <span class="number">0</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o <span class="keyword">instanceof</span> ArraySet otherArraySet) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上图我们又发现了“instanceof”这个奇怪的关键词，它是在判断o是否时ArraySet的一个实例,同时，我们又注意到otherAccaySet,这又是什么鬼东西？原来，如果前面的判断为true，他会为你执行一个额外的操作，即它将创建一个名为otherArraySet的新变量，类型为ArraySet.换句话说，它和o是一样的，他们包含相同的引用。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20214128.png" alt="屏幕截图 2024-10-09 214128"></p>
<p>话又说回来，如何判断两个数组大小相同呢？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20214337.png" alt="屏幕截图 2024-10-09 214337"></p>
<p>大小相同，并且有互相的东西–“你有，我也有”</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/28603/Pictures/Screenshots/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-09%20214543.png" alt="屏幕截图 2024-10-09 214543"></p>
<h4 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h4><p>异常会导致正常的控制流停止。实际上，我们可以选择抛出自己的异常。在 Python 中，您可能已经看到过这种情况，使用 <code>raise</code> 关键字。在 Java 中，异常是对象，我们使用以下格式抛出异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ExceptionObject</span>(parameter1, ...)</span><br></pre></td></tr></table></figure>

<p>一个典型例子如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/* Associates the specified value with the specified key in this map.</span><br><span class="line">   Throws an IllegalArgumentException if the key is null. */</span><br><span class="line">public void add(T x) &#123;</span><br><span class="line">    if (x == null) &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;can&#x27;t add null&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    if (contains(x)) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    items[size] = x;</span><br><span class="line">    size += 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为什么这么做？以下是课本原文：</p>
<p>We get an Exception either way - why is this better?</p>
<ol>
<li>We have control of our code: we consciously decide at what point to stop the flow of our program</li>
<li>More useful Exception type and helpful error message for those using our code</li>
</ol>
<p>However, it would be better if the program doesn’t crash at all. There are different things we could do in this case. Here are some below:</p>
<p><strong>Approach 1</strong>: Don’t add <code>null</code> to the array if it is passed into <code>add</code></p>
<p><strong>Approach 2</strong>: Change the <code>contains</code> method to account for the case if <code>items[i] == null</code>.</p>
<p>Whatever you decide, it is important that users know what to expect. That is why documentation (such as comments about your methods) is very important</p>
<h2 id="Disjoint-Sets"><a href="#Disjoint-Sets" class="headerlink" title="Disjoint Sets"></a>Disjoint Sets</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>不相交集在名字上听起来像是数学上的<code>A∩B=0</code>,打一个日常生活的例子，比如世界地图，我们可以很清晰的看出国家之间的地理位置（国界是否接壤可以很清晰地看出来），或者，搭建桥梁连接两地，不相交集就是为了用代码表示诸如类似的情况。</p>
<p>为了判断是否连接和搭建连接，搭建不相交集需要以下两个操作：</p>
<ol>
<li><code>connect(x, y)</code>: Connects x and y</li>
<li><code>isConnected(x, y)</code>: Return true if x and y are connected</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line">    <span class="comment">/** connects two items P and Q */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** checks to see if two items are connected */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不相交集的大致作用如下：</p>
<p>假设我们有四个元素如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10intro1_resized.png" alt="intro1_resized"></p>
<p>在调用<code>connect(A, B)</code>后：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10intro2_resized.png" alt="intro2_resized"></p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isConnected<span class="function"><span class="params">(A, B)</span> -&gt;</span> <span class="literal">true</span>;</span><br><span class="line">isConnected<span class="function"><span class="params">(A, C)</span> -&gt;</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>在调用 <code>connect(A, D)</code> 后：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10intro3_resized.png" alt="intro3_resized"></p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isConnected<span class="function"><span class="params">(A, D)</span> -&gt;</span> <span class="literal">true</span></span><br><span class="line">isConnected<span class="function"><span class="params">(A, C)</span> -&gt;</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>从上述过程，我们可以发现<code>&#123;A&#125;, &#123;B&#125;, &#123;C&#125;, &#123;D&#125;</code>，通过一系列操作，变成了<code>&#123;A, B, D&#125;, &#123;C&#125;</code>,如何表示这个变化呢？我们可以用列表表示(<code>List&lt;Set&lt;Integger&gt;&gt;</code>): <code>[&#123;A, B, D&#125;, &#123;C&#125;]</code></p>
<h3 id="ListOfSetsDS"><a href="#ListOfSetsDS" class="headerlink" title="ListOfSetsDS"></a>ListOfSetsDS</h3><p><code>isConected</code>: 需要遍历列表中的所有集合来判断是否连接在一起。</p>
<ul>
<li><strong>时间复杂度</strong>：以最坏的情况来看（假设有N个集合），如果没有连接，且又在末尾，O(N)+O(N-1) &#x3D; O(N).</li>
</ul>
<p><code>connect</code>: 需要遍历所有集合，且代码十分复杂。</p>
<h3 id="Quick-Find"><a href="#Quick-Find" class="headerlink" title="Quick Find"></a>Quick Find</h3><p>我们进行第一次优化，将不相交集合用数组的方式来实现：</p>
<ul>
<li>The <strong>indices of the array</strong> represent the elements of our set.</li>
<li>The <strong>value at an index</strong> is the set number it belongs to.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/109.2.1.png" alt="9.2.1"></p>
<p><code>connect(x, y)</code>: 将其中一个位置的id修改为另一个的id即可</p>
<ul>
<li>时间复杂度：O(N)</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(4).png" alt="image (4)"></p>
<p><code>isConnected(x, y)</code>: 查看两个位置的元素是否相同</p>
<ul>
<li>时间复杂度：O(1)</li>
</ul>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickFindDS</span> <span class="keyword">implements</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Θ(N) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickFindDS</span><span class="params">(<span class="type">int</span> N)</span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            id[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* need to iterate through the array =&gt; Θ(N) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pid</span> <span class="operator">=</span> id[p];</span><br><span class="line">        <span class="type">int</span> <span class="variable">qid</span> <span class="operator">=</span> id[q];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; id.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid)&#123;</span><br><span class="line">                id[i] = qid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Θ(1) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (id[p] == id[q]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="quick-union"><a href="#quick-union" class="headerlink" title="quick union"></a>quick union</h3><p>课本原话：</p>
<p>we assign each item the index of its parent. If an item has no parent, then it is a ‘root’ and we assign it a negative value.</p>
<ul>
<li>the nodes will be the items in our set,</li>
<li>each node only needs a reference to its parent rather than a direct reference to the face of the set, and</li>
<li>the top of each tree (we refer to this top as the “root” of the tree) will be the face of the set it represents.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(5).png" alt="image (5)"></p>
<p><code>connect(x, y)</code>: 假如我们要合并最左边的与中间的，我们要先找到两个对应的父链，再只需要将索引为3的元素改成0（为什么不是将索引为零的元素改成3之后会讨论）。</p>
<ul>
<li><p>时间复杂度:：O(N)</p>
</li>
<li><p><input disabled="" type="checkbox"> 
分支任务1：为什么不是将索引为零的元素改成3</p>
</li>
</ul>
<p><code>isConnected(x, y)</code>:只要看所对应的父链是否相等。</p>
<ul>
<li>时间复杂度：O(N)</li>
</ul>
<p>为了完成quick union,还需要<code>find</code>寻找<code>item</code>所归属的根。</p>
<p>相关代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickUnionDS</span> <span class="keyword">implements</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickUnionDS</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="title class_">int</span>[num];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> p)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (parent[p] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            p = parent[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> find(p);</span><br><span class="line">        <span class="type">int</span> j= find(q);</span><br><span class="line">        parent[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> find(p) == find(q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这串代码还会引发一个问题：会产生如下图丑陋的结构</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10worst.png" alt="worst"></p>
<p>为了避免这个问题，我们要进行如下优化：</p>
<h4 id="weight-quick-union"><a href="#weight-quick-union" class="headerlink" title="weight quick union"></a>weight quick union</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-21%20175018.png" alt="屏幕截图 2024-10-21 175018"></p>
<p>对于上述情况，我们是选择将T1连接到T2下还是将T2连接到T1下呢？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(6).png" alt="image (6)">当我们有两个不同大小的树，进行这个连接操作时，应该始终选择较小的树，并将其放在较大的树的下面（如上图)，这样合成的树的深度会比另一种情况矮，遍历一个分支的速度会快很多。</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 分支任务1：为什么不是将索引为零的元素改成3</li>
</ul>
<p>一个巧妙的跟踪大小的方法，在父链所代表的元素上显示大小，也就是-1换成大小取负号。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10initial.png" alt="initial"></p>
<p>调用<code>union(0,1)</code> 与 <code>union(2,3)</code>后：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10union1.png" alt="union1"></p>
<h4 id="Weighted-Quick-Union-with-Path-Compression"><a href="#Weighted-Quick-Union-with-Path-Compression" class="headerlink" title="Weighted Quick Union with Path Compression"></a>Weighted Quick Union with Path Compression</h4><p>课本原文：</p>
<p>A clever optimization is to move the leaf up the tree so it becomes a direct child of the root. That way, the next time you call on that leaf, it will run much more quickly. An even more clever idea is that we could do the same thing to <em>every</em> node that is on the path from the leaf to the root. Specifically, when we call on an item, all of the nodes that were traversed upon going up the tree (to the root) are updated so that they are now connected directly to the root. This optimization is called <strong>path compression</strong>. Once you find an item, path compression will make finding it (and all the nodes on the path to the root) in the future faster.</p>
<p>大意：从底部的<code>item</code>往上爬，在此过程中，将路径上的<code>item</code>连接到它们的根。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10path_compression_before.png" alt="path_compression_before"></p>
<p>After we call on , all of the nodes we traversed to get to the root are updated so that they now connect directly to the root:<code>find(5)</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10path_compression_after.png" alt="path_compression_after"></p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>N: number of elements in Disjoint Set</p>
<table>
<thead>
<tr>
<th>Implementation</th>
<th><code>isConnected</code></th>
<th><code>connect</code></th>
</tr>
</thead>
<tbody><tr>
<td>Quick Find</td>
<td>Θ(N)</td>
<td>Θ(1)</td>
</tr>
<tr>
<td>Quick Union</td>
<td>O(N)</td>
<td>O(N)</td>
</tr>
<tr>
<td>Weighted Quick Union (WQU)</td>
<td>O(log N)</td>
<td>O(log N)</td>
</tr>
<tr>
<td>WQU with Path Compression</td>
<td>O(α(N))*</td>
<td>O(α(N))*</td>
</tr>
</tbody></table>
<h2 id="ADTS（Abstract-Data-Type）"><a href="#ADTS（Abstract-Data-Type）" class="headerlink" title="ADTS（Abstract Data Type）"></a>ADTS（Abstract Data Type）</h2><p>抽象数据结构(ADT)侧重于告诉你能做什么(What)，而不是具体告诉你怎么做(How)。</p>
<p>(Abstract data types (ADTs) are defined in terms of operations, not implementation.)</p>
<p>Some commonly used ADT’s are:</p>
<ul>
<li>Stacks: Structures that support last-in first-out retrieval of elements<ul>
<li><code>push(int x)</code>: puts x on the top of the stack</li>
<li><code>int pop()</code>: takes the element on the top of the stack</li>
</ul>
</li>
<li><strong>Lists</strong>: an ordered set of elements<ul>
<li><code>add(int i)</code>: adds an element</li>
<li><code>int get(int i)</code>: gets element at index i</li>
</ul>
</li>
<li><strong>Sets</strong>: an unordered set of unique elements (no repeats)<ul>
<li><code>add(int i)</code>: adds an element</li>
<li><code>contains(int i)</code>: returns a boolean for whether or not the set contains the value</li>
</ul>
</li>
<li><strong>Maps</strong>: set of key&#x2F;value pairs<ul>
<li><code>put(K key, V value)</code>: puts a key value pair into the map</li>
<li><code>V get(K key)</code>: gets the value corresponding to the key</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/1010%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-19%20153010.png" alt="屏幕截图 2024-10-19 153010"></p>
<h3 id="BST（Binary-Search-Trees）"><a href="#BST（Binary-Search-Trees）" class="headerlink" title="BST（Binary Search Trees）"></a>BST（Binary Search Trees）</h3><h4 id="Derivation"><a href="#Derivation" class="headerlink" title="Derivation"></a>Derivation</h4><p>用链表一步步搭建二叉搜索树的雏形：</p>
<ol>
<li><p>首先，要保证是有序的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-19%20154834.png" alt="屏幕截图 2024-10-19 154834"></p>
</li>
<li><p>为了提高效率，直接从中间开始</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-19%20154904.png" alt="屏幕截图 2024-10-19 154904"></p>
</li>
<li><p>我们继续优化它，使它每一次都从指定区域的中间开始</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image.png" alt="image"></p>
</li>
</ol>
<h4 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h4><p>在了解二叉搜索树之前，我们要先了解树的定义：</p>
<p>Trees are composed of:</p>
<ul>
<li>nodes </li>
<li>edges that connect those nodes. – 连接节点的线<ul>
<li><strong>Constraint</strong>: there is only one path between any two nodes.（两个节点只有唯一的路径）</li>
</ul>
</li>
</ul>
<p>In some trees, we select a <strong>root</strong> node which is a node that has no parents. </p>
<p>A tree also has <strong>leaves</strong>, which are nodes with no children.</p>
<p>进一步我们来了解Rooted Trees 和 Rooted Binary Trees</p>
<ul>
<li>Every node N except the root has exactly one parent,defined as the first node on the path from N to the root.</li>
<li>Unlike (most)real trees, the root is usually dispicted at the top of the tree.</li>
<li>A node with no child is called a leaf.</li>
</ul>
<p>In a rooted binery tree, every node has either 0, 1, or 2   </p>
<p>childreb(subtrees)</p>
<p>最后我们有<strong>二叉树</strong>和<strong>二叉搜索树</strong>的定义：</p>
<ul>
<li><p><strong>Binary Trees</strong>: in addition to the above requirements, also hold the binary property constraint. That is, each node has either 0, 1, or 2 children.</p>
</li>
<li><p>Binary Search Trees</p>
<p>: in addition to all of the above requirements, also hold the property that For every node X in the tree:</p>
<ul>
<li>Every key in the left subtree is less than X’s key.</li>
<li>Every key in the right subtree is greater than X’s key. <strong>Remember this property!! We will reference it a lot throughout the duration of this module and 61B.</strong></li>
</ul>
</li>
</ul>
<p><strong>Rule</strong>：No duplicate keys allowed.(没有重复)</p>
<p>Here is the BST class we will be using in this module:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">BST</span>&lt;Key&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> BST left;</span><br><span class="line">    <span class="keyword">private</span> BST right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BST</span><span class="params">(Key key, BST left, BST Right)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BST</span><span class="params">(Key key)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h4><p>类比二分查找，当我们想要查找 BST 中的数据的时候，思路是同样的：</p>
<ul>
<li>和当前结点的值比大小，若是则返回</li>
<li>若是小于待查值，则往右拐</li>
<li>若是大于待查值，则往左拐</li>
</ul>
<p>如果树很茂密，那么树的高度 H &#x3D; log N，即意味着查找用时也是 log N.</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> BST <span class="title function_">find</span><span class="params">(BST T, Key sk)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (sk.equals(T.key))</span><br><span class="line">        <span class="keyword">return</span> T;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (sk &lt; T.key)</span><br><span class="line">        <span class="keyword">return</span> find(T.right, sk);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> find(T.right, sk);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h4><p>Search for key:</p>
<ul>
<li><p>If found, do nothing</p>
</li>
<li><p>If not found:</p>
<ul>
<li><p>Crete new node.</p>
</li>
<li><p>Set appropriate link</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> BST <span class="title function_">insert</span><span class="params">(BST T, Key ik)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BST</span>(ik);</span><br><span class="line">  <span class="keyword">if</span> (ik ≺ T.key)</span><br><span class="line">    T.left = insert(T.left, ik);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (ik ≻ T.key)</span><br><span class="line">    T.right = insert(T.right, ik);</span><br><span class="line">  <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><p>3 Case:</p>
<ul>
<li>Deletion key has no children.</li>
<li>Deletion key has one children.</li>
<li>Deletion key has two children.</li>
</ul>
<p>对于第一种情况，直接让父链不再指向它，转身指向null.</p>
<p>对于第二种情况，让父节点把原本指向要删除的节点的指针指向它的子节点。</p>
<p>对于第三种情况，在要删除的节点下的子节点中找到一个合适的替换该要删除的节点。</p>
<h4 id="Map-VS-Set"><a href="#Map-VS-Set" class="headerlink" title="Map VS Set"></a>Map VS Set</h4><p>以下是课本原文：</p>
<p>We can use a BST to implement the <code>Set</code> ADT. If we use a BST, we can decrease the runtime of <code>contains</code> to log⁡(n)log(<em>n</em>) because of the BST property which enables us to use binary search!</p>
<p>We can also make a binary tree into a map by having each BST node hold <code>(key,value)</code> pairs instead of singular values. We will compare each element’s key in order to determine where to place it within our tree.</p>
<p>具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义二叉树的节点类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    TreeNode left, right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        left = right = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义二叉搜索树类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinarySearchTree</span> &#123;</span><br><span class="line">    TreeNode root;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数，初始化根节点为空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinarySearchTree</span><span class="params">()</span> &#123;</span><br><span class="line">        root = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入一个新的值到二叉搜索树中</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        root = insertRec(root, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归地插入一个值</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">insertRec</span><span class="params">(TreeNode root, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(value);</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value &lt; root.value)</span><br><span class="line">            root.left = insertRec(root.left, value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (value &gt; root.value)</span><br><span class="line">            root.right = insertRec(root.right, value);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 搜索某个值是否存在于二叉搜索树中</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> searchRec(root, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归地搜索某个值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">searchRec</span><span class="params">(TreeNode root, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (root.value == value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value &lt; root.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> searchRec(root.left, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> searchRec(root.right, value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 中序遍历二叉搜索树（从小到大排序）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inorder</span><span class="params">()</span> &#123;</span><br><span class="line">        inorderRec(root);</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归地进行中序遍历</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inorderRec</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            inorderRec(root.left);</span><br><span class="line">            System.out.print(root.value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            inorderRec(root.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除节点</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        root = deleteRec(root, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归地删除某个值</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">deleteRec</span><span class="params">(TreeNode root, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value &lt; root.value) &#123;</span><br><span class="line">            root.left = deleteRec(root.left, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &gt; root.value) &#123;</span><br><span class="line">            root.right = deleteRec(root.right, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 该节点只有一个子节点或者没有子节点</span></span><br><span class="line">            <span class="keyword">if</span> (root.left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> root.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> root.left;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 该节点有两个子节点，找到中序后继（右子树的最小值）</span></span><br><span class="line">            root.value = minValue(root.right);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 删除中序后继</span></span><br><span class="line">            <span class="comment">//root.right = deleteRec(root.right, root.value);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到最小值节点</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">minValue</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">minValue</span> <span class="operator">=</span> root.value;</span><br><span class="line">        <span class="keyword">while</span> (root.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            minValue = root.left.value;</span><br><span class="line">            root = root.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> minValue;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="Balance-Trees"><a href="#Balance-Trees" class="headerlink" title="Balance Trees"></a>Balance Trees</h3><h4 id="Height-and-Depth"><a href="#Height-and-Depth" class="headerlink" title="Height and Depth"></a>Height and Depth</h4><p>高度与深度在BST中是十分重要的特征，决定BST的运行时间。</p>
<p>首先，高度与深度的关系如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(2).png" alt="image (2)"></p>
<p>其次，不同的插入方式可能造成同样的高度中存放不同数量的元素（如下图）：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(1).png" alt="image (1)"></p>
<p>通过观察，我们发现左边的树十分茂密，而右边的树十分稀疏。这会造成如下的情形：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10image%20(3).png" alt="image (3)"></p>
<p>我们可以发现稀疏的树的平均深度比茂密的树的平均深度要大，这表明左边的运行时间会较大。</p>
<p>为了避免这种不平衡的情况（稀疏的情况），我们将讨论B-Tree</p>
<h4 id="B-Trees"><a href="#B-Trees" class="headerlink" title="B-Trees"></a>B-Trees</h4><h4 id="-1"><a href="#-1" class="headerlink" title=""></a><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-19%20202148.png" alt="屏幕截图 2024-10-19 202148"></h4><p>当子节点中元素等于4个，将会分裂，中间偏左的元素会到上一级，之前在它左边的和右边的分别当作它的子节点。</p>
<h4 id="Invariants"><a href="#Invariants" class="headerlink" title="Invariants"></a>Invariants</h4><p>B-Tree具有以下有用的不变性：</p>
<ul>
<li>All leaves must be the same distance from the source.</li>
<li>A non-leaf node with 𝑘 items must have exactly 𝑘+1 children.</li>
</ul>
<p>In tandem, these invariants cause the tree to always be bushy.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-19%20203629.png" alt="屏幕截图 2024-10-19 203629"></p>
<p>节点可以存放元素的个数等于这棵树的高度</p>
<h4 id="Runtime-for-contains"><a href="#Runtime-for-contains" class="headerlink" title="Runtime for contains"></a>Runtime for <code>contains</code></h4><p>In the worst case, we have to examine up to L<em>L</em> items per node. We know that height is logarithmic, so the runtime of <code>contains</code> is bounded by O(Llog⁡N)<em>O</em>(<em>L</em>log<em>N</em>). Since L<em>L</em> is a constant, we can drop the multiplicative factor, resulting in a runtime of O(log⁡N).</p>
<h4 id="Runtime-for-add"><a href="#Runtime-for-add" class="headerlink" title="Runtime for add"></a>Runtime for <code>add</code></h4><p>A similar analysis can be done for <code>add</code>, except we have to consider the case in which we must split a leaf node. Since the height of the tree is O(log⁡N)<em>O</em>(log<em>N</em>), at worst, we do log⁡Nlog<em>N</em> split operations (cascading from the leaf to the root). This simply adds an additive factor of log⁡Nlog<em>N</em> to our runtime, which still results in an overall runtime of O(log⁡N).</p>
<h2 id="Sorting-–-排序方法"><a href="#Sorting-–-排序方法" class="headerlink" title="Sorting – 排序方法"></a>Sorting – 排序方法</h2><p>这节的任务列表如下：</p>
<ul>
<li><input disabled="" type="checkbox"> Section Sort</li>
<li><input disabled="" type="checkbox"> Heap Sort</li>
</ul>
<h3 id="Selection-Sort-–-选择排序"><a href="#Selection-Sort-–-选择排序" class="headerlink" title="Selection Sort – 选择排序"></a>Selection Sort – 选择排序</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-18%20201012.png" alt="屏幕截图 2024-10-18 201012"></p>
<p><em><strong>选择排序有两种实现方式：</strong></em></p>
<ol>
<li>找到最小的元素，把它放在最左边，然后在剩余的元素中重复这个操作。</li>
<li>找到最大的元素，把它放在最右边，然后在剩余的元素中重复这个操作。</li>
</ol>
<h4 id="Section-Runtime"><a href="#Section-Runtime" class="headerlink" title="Section Runtime"></a>Section Runtime</h4><p>   <strong>时间复杂度：O(N^2);</strong></p>
<p>   选择排序每次操作都在找最小的值，还记得堆(heap)和优先队列(priority)吗？堆十分擅                      长告诉我们最小的元素。</p>
<h3 id="Heap-Sort-–-堆排序"><a href="#Heap-Sort-–-堆排序" class="headerlink" title="Heap Sort – 堆排序"></a>Heap Sort – 堆排序</h3><h4 id="Naive-heap-sort"><a href="#Naive-heap-sort" class="headerlink" title="Naive heap sort"></a>Naive heap sort</h4><ul>
<li><p>Insert all items into a max heap, and discard input array. Create output array.</p>
</li>
<li><p>Repeated N times:</p>
<ul>
<li><p>Delete largest item from the max heap.</p>
</li>
<li><p>Put largest item at the end of the unused part of the output array.</p>
<p> 这一步就是将堆的最大值放在大小为size的数组最后可放的位置，然后移除最大值，直到第一个元素为最小。</p>
</li>
</ul>
<p>这边有一个问题：为什么不用最小堆，这个问题我们先不讨论，先把它放在<strong>分支任务</strong>里。</p>
<p>分支任务如下：</p>
<ul>
<li><input disabled="" type="checkbox"> 堆排序为什么用最大堆而不是最小堆</li>
</ul>
</li>
</ul>
<p>总运行时间有两个步骤：</p>
<ul>
<li><p>堆排列的时间：O(N logN).</p>
</li>
<li><p>删除元素的总时间：O(N(需要删除的元素个数) * logN(每次删除的时间)) &#x3D; O(N logN).</p>
<p> 最后结合两个的时间，得到的<strong>时间复杂度</strong>为O(N logN).</p>
</li>
</ul>
<p>我们再来看看空间复杂度（内存使用情况）：创建了一个大小为N的数组来存放堆，又创建一个大小为N的数组来存放排好序的元素。</p>
<p>所以，内存使用情况为O(N).</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Section Sort</li>
</ul>
<h4 id="Heapification"><a href="#Heapification" class="headerlink" title="Heapification"></a>Heapification</h4><p>我们不想创建额外的数组，可以将数组堆化，但这个堆并不是有效的最大堆。</p>
<ul>
<li>Bottom-up heapify input array:<ul>
<li>Sink nodes in reverse level order: sink(k)</li>
<li>After sinking, guarantee that rooted at position k is a heap.</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/WaterOfWinter/markdown_pic@main/2024/10%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-18%20210729.png" alt="屏幕截图 2024-10-18 210729"></p>
<p>这一步是从堆的底部开始，当子节点比节点大就交换位置。</p>
<p>现在让我们来解决为什么使用最大堆而不是最小堆（视频位置Lecture 24 –  44：10）：</p>
<p>如果堆（heap）正在消耗元素以至于它的后面的元素开始变得未使用，而输出数组正在从后面填充元素，以至于它们未被使用，它们处于一种动态平衡的状况，这种情况下不需要创建一个新数组。</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 堆排序为什么用最大堆而不是最小堆</li>
</ul>
<h4 id="Heapsort-Runtime"><a href="#Heapsort-Runtime" class="headerlink" title="Heapsort Runtime"></a>Heapsort Runtime</h4><p>总运行时间分为两个步骤：</p>
<ul>
<li><p>自底而上的堆化过程的时间：最坏的情况下，我们要堆化(堆化时间为logN)所有元素(N个)，时间为O(N logN)</p>
</li>
<li><p>删除元素：O(N(元素个数) * (删除一个元素的时间)logN) &#x3D; O(N logN)</p>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
Heap Sort</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://waterofwinter.github.io/water.github.io">water</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://waterofwinter.github.io/water.github.io/2024/10/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%97%85%E7%A8%8B/">https://waterofwinter.github.io/water.github.io/2024/10/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%97%85%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://waterofwinter.github.io/water.github.io" target="_blank">Water's study corner</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/water.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BAComputer/">计算机Computer</a></div><div class="post_share"><div class="social-share" data-image="/water.github.io/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241017164223.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/water.github.io/2024/10/10/%E5%85%B3%E4%BA%8E%E5%AD%A6%E4%B9%A0CSAPP%E8%BF%99%E6%A1%A3%E4%BA%8B/" title="关于学习CSAPP这档事"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">关于学习CSAPP这档事</div></div></a></div><div class="next-post pull-right"><a href="/water.github.io/2024/10/08/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%97%85%E7%A8%8B/" title="线性代数的旅程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">线性代数的旅程</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/water.github.io/2024/10/07/CS50-%E6%A2%A6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%9C%B0%E6%96%B9/" title="CS50--梦开始的地方"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-07</div><div class="title">CS50--梦开始的地方</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/water.github.io/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241017164223.jpg" onerror="this.onerror=null;this.src='/water.github.io/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">water</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/water.github.io/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/water.github.io/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/water.github.io/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/WaterOfWinter"><i class="fab fa-github"></i><span>前往小窝</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/WaterOfWinter" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2860366719@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to water's study corner</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%97%85%E7%A8%8B"><span class="toc-text">*数据结构的旅程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Alist"><span class="toc-text">Alist</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inheritance-IV-iterators"><span class="toc-text">Inheritance IV iterators</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Iterators-and-Iterables"><span class="toc-text">Iterators and Iterables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-methods"><span class="toc-text">Object methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#toString-NaN"><span class="toc-text">toString()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#this"><span class="toc-text">this</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#equals"><span class="toc-text">equals()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Exceptions"><span class="toc-text">Exceptions</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Disjoint-Sets"><span class="toc-text">Disjoint Sets</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ListOfSetsDS"><span class="toc-text">ListOfSetsDS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-Find"><span class="toc-text">Quick Find</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#quick-union"><span class="toc-text">quick union</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#weight-quick-union"><span class="toc-text">weight quick union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Weighted-Quick-Union-with-Path-Compression"><span class="toc-text">Weighted Quick Union with Path Compression</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Summary"><span class="toc-text">Summary</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ADTS%EF%BC%88Abstract-Data-Type%EF%BC%89"><span class="toc-text">ADTS（Abstract Data Type）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BST%EF%BC%88Binary-Search-Trees%EF%BC%89"><span class="toc-text">BST（Binary Search Trees）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Derivation"><span class="toc-text">Derivation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Definition"><span class="toc-text">Definition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Search"><span class="toc-text">Search</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Insert"><span class="toc-text">Insert</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#delete"><span class="toc-text">delete</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Map-VS-Set"><span class="toc-text">Map VS Set</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Balance-Trees"><span class="toc-text">Balance Trees</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Height-and-Depth"><span class="toc-text">Height and Depth</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-Trees"><span class="toc-text">B-Trees</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-1"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Invariants"><span class="toc-text">Invariants</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Runtime-for-contains"><span class="toc-text">Runtime for contains</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Runtime-for-add"><span class="toc-text">Runtime for add</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sorting-%E2%80%93-%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95"><span class="toc-text">Sorting – 排序方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Selection-Sort-%E2%80%93-%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F"><span class="toc-text">Selection Sort – 选择排序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Section-Runtime"><span class="toc-text">Section Runtime</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Heap-Sort-%E2%80%93-%E5%A0%86%E6%8E%92%E5%BA%8F"><span class="toc-text">Heap Sort – 堆排序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Naive-heap-sort"><span class="toc-text">Naive heap sort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Heapification"><span class="toc-text">Heapification</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Heapsort-Runtime"><span class="toc-text">Heapsort Runtime</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/water.github.io/images/103008653_p0_master1200.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2024 By water</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/water.github.io/js/utils.js?v=4.13.0"></script><script src="/water.github.io/js/main.js?v=4.13.0"></script><script src="/water.github.io/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/water.github.io/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><!-- hexo injector body_end end --></body></html>